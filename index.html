<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>íŒêµë¹„ íƒ€ì ê²Œì„</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(to bottom, #16213e 0%, #000000 100%);
            font-family: 'Malgun Gothic', sans-serif;
        }
        #gameContainer {
            text-align: center;
        }
        canvas {
            /* border: 3px solid #0f3460; */
            background: linear-gradient(to bottom, #0a1128 0%, #1a1a2e 100%);
            box-shadow: 0 0 30px rgba(136, 165, 185, 0.3);
        }
        #info {
            margin-top: 20px;
            color: #ffffff;
            font-size: 24px;
            font-weight: bold;
        }
        #input {
            margin-top: 15px;
            padding: 12px 20px;
            font-size: 20px;
            width: 500px;
            border: 2px solid #0f3460;
            border-radius: 8px;
            background: #16213e;
            color: #fff;
            text-align: center;
            outline: none;
        }
        #input:focus {
            border-color: #3da861;
        }
        .overlay {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(75, 75, 75, 0.95);
            padding: 20px;
            text-align: center;
            z-index: 100;
        }
        .overlay h2 {
            color: #ffffff;
            font-size: 48px;
            margin-bottom: 20px;
        }
        .overlay h3 {
            color: #fff;
            font-size: 28px;
            margin-bottom: 30px;
        }
        .overlay p {
            color: #bbb;
            font-size: 18px;
            margin: 10px 0;
            line-height: 1.6;
        }
        .overlay ul {
            text-align: left;
            color: #bbb;
            font-size: 18px;
            margin: 20px auto;
            max-width: 400px;
            line-height: 1.8;
        }
        .gameBtn {
            margin-top: 30px;
            padding: 15px 40px;
            font-size: 24px;
            background: #3da861;
            color: #fff;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
        }
        .gameBtn:hover {
            background: #73f39e;
            transform: scale(1.05);
        }
        #finalScore, #finalLevel {
            color: #fff;
            font-size: 24px;
            margin: 15px 0;
        }
    </style>
    <script src="https://grggames.com/grg-games-sdk.min.js"></script>
</head>
<body>
    <div id="gameContainer">
        <canvas id="gameCanvas" width="800" height="600"></canvas>
        <div id="info">ì ìˆ˜: 0 | ëª©ìˆ¨: â¤ï¸â¤ï¸â¤ï¸ | ë ˆë²¨: 1</div>
        <input type="text" 
            oncopy="return false" 
            onpaste="return false" 
            oncut="return false"
            id="input" placeholder="ì—¬ê¸°ì— ì…ë ¥í•˜ì„¸ìš”" autocomplete="off">
    </div>
    
    <div id="startScreen" class="overlay" style="display: block;">
        <img src="./assets/main.png" alt="ê²Œì„ ì´ë¯¸ì§€" style="width: 600px; margin-bottom: 20px; border-radius: 10px;">
        <h2>ğŸŒ§ï¸ íŒêµë¹„ íƒ€ì ê²Œì„ ğŸŒ§ï¸</h2>
        <ul>
            <li>ğŸ’§ í•˜ëŠ˜ì—ì„œ ë–¨ì–´ì§€ëŠ” ë‹¨ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”</li>
            <li>âŒ¨ï¸ ì…ë ¥ í›„ <strong>ì—”í„°</strong>ë¥¼ ëˆŒëŸ¬ ì œì¶œ!</li>
            <li>â¤ï¸ ëª©ìˆ¨ì€ 3ê°œ, ë‹¨ì–´ê°€ ë•…ì— ë‹¿ìœ¼ë©´ -1</li>
            <li>ğŸ“ˆ ìµœëŒ€ 10ë‹¨ê³„ ë ˆë²¨ ì—…!</li>
            <li>âš¡ ë ˆë²¨ì´ ì˜¤ë¥¼ìˆ˜ë¡ ì–´ë ¤ì›Œì ¸ìš”~</li>
        </ul>
        <button class="gameBtn" id="startBtn">ê²Œì„ ì‹œì‘</button>
    </div>
    
    <div id="gameOver" class="overlay">
        <h2>ê²Œì„ ì˜¤ë²„!</h2>
        <p id="finalScore">ìµœì¢… ì ìˆ˜: 0</p>
        <p id="finalLevel">ìµœì¢… ë ˆë²¨: 1</p>
        <button class="gameBtn" id="restartBtn">ë‹¤ì‹œ í•˜ê¸°</button>
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const input = document.getElementById('input');
        const infoDiv = document.getElementById('info');
        const startScreen = document.getElementById('startScreen');
        const gameOverDiv = document.getElementById('gameOver');
        const startBtn = document.getElementById('startBtn');
        const restartBtn = document.getElementById('restartBtn');

        const WORDS_BY_LEVEL = {
            1: ['ì´ìŠˆ', 'ì½œë°±', 'ì†Œì¼“', 'ë‹ˆì¦ˆ', 'ìŠ¬ë™', 'ë””ì½”', 'ë©˜ì…˜', 'ë¡¤ë°±', 'ì¥ì• ', 'ì•„ì‚½'],
            2: ['í‚¥ì˜¤í”„', 'ë””í´íŠ¸', 'ì–¼ë¼ì¸', 'ì›Œí‚¹ë°ì´', 'íŠ¸ë˜í‚¹', 'í”¼ë“œë°±', 'íŒ”ë¡œì—…'],
            3: ['ë¦¬ì†ŒìŠ¤', 'ë§ˆì¼ìŠ¤í†¤', 'ë°°í¬', 'ê¹ƒí—™', 'ì»¤ë°‹', 'ì»´', 'ë””ë²¨ë¡­', 'ì™€ìš°íŒ©í„°'],
            4: ['ëª¨ë‹ˆí„°ë§', 'ë¹Œë“œ', 'ë¡œë“œë§µ', 'í’€ìŠ¤íƒ', 'ì§€ë¼', 'ì–´ì‚¬ì¸', 'API', 'ìŠ¤í¬ëŸ¼', 'ì—ìì¼'],
            5: ['í”„ë¡ íŠ¸', 'ë°±ì—”ë“œ', 'SDK', 'ISMS', 'ë§ˆí¬ì—…', 'ESG'],
            6: ['ITGC', 'ë¦¬ë¶“', 'ë¦¬ì „', 'AWS', 'IDC', 'íƒ€ì„ì•„ì›ƒ', 'ì´ì§ì˜ë‹¤ë¦¬'],
            7: ['ë…¸ìš´ì´ìŠˆ', 'ì—£ì§€ì¼€ì´ìŠ¤', 'ìŠ¤í™ì•„ì›ƒ', 'ë°ë“œë¼ì¸', 'ì½”ë“œí”„ë¦¬ì¦ˆ'],
            8: ['ëŸ¬í”„í•˜ê²Œ ì¼ì • ì£¼ì„¸ìš”', 
                'ë©˜ì…˜ ì¶”ê°€í•´ ì£¼ì„¸ìš”', 
                'ì´ìŠˆì—… ë¶€íƒë“œë¦½ë‹ˆë‹¤', 
                'ì¸ì¦ì„œ ì‹±ê¸€ë¡œ ë°œê¸‰í•´ë„ ë ê¹Œìš”?', 
                'í˜¸ìŠ¤íŠ¸ ë„£ìœ¼ì…¨ì–´ìš”?',
                'ì›Œí‚¹ë°ì´ë¡œ 3ì¼ ì…ë‹ˆë‹¤',
                'ì½”ë“œ í”„ë¦¬ì¦ˆ ì¤‘ì…ë‹ˆë‹¤',
                'ì´ìŠˆ íŒ”ë¡œì—… í•„ìš”í•©ë‹ˆë‹¤',
            ],
            9: ['ìºì‹œ ë‚ ë¦¬ê³  í™•ì¸ ë¶€íƒë“œë ¤ìš”', 
                'ì´ìŠˆê°€ ìˆì–´ ë¡¤ë°± í•˜ê² ìŠµë‹ˆë‹¤', 
                'QA ì‚¬ì¸ì˜¤í”„ ë˜ì—ˆìŠµë‹ˆë‹¤', 
                'í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸ ì ìš© í•˜ì˜€ìŠµë‹ˆë‹¤', 
                'ê·¸ë¼íŒŒë‚˜ ëŒ€ì‹œë³´ë“œ ì¶”ê°€ í•˜ì˜€ìŠµë‹ˆë‹¤',
                "ì˜¤ëŠ˜ ì•ˆê±´ ì–¼ë¼ì¸ í•„ìš”í•©ë‹ˆë‹¤",
                "ê¸ˆì£¼ ìŠ¤í”„ë¦°íŠ¸ ë²”ìœ„ ì»¨íŒ ë¶€íƒ",
                "ë°ë“œë¼ì¸ ì„ë°•, ë¦¬ì†ŒìŠ¤ ì²´í¬",
                "ì´ìŠˆëŠ” ë…¸ì…˜ì— ì—…ë¡œë“œ ì™„ë£Œ",
                "ìŠ¬ë™ ì“°ë ˆë“œë¡œ íŒ”ë¡œì—… í•´ì£¼ì„¸ìš”",
                "í•«í”½ìŠ¤ ë°°í¬ë¼ ë¡¤ë°± ëŒ€ë¹„í•˜ì„¸ìš”",
                "ë‹¤ìŒ ìŠ¤í…ì€ í‚¥ì˜¤í”„ ë¯¸íŒ…ì—ì„œ",
                "ë°ì´í„° ë“œë¦¬ë¸ìœ¼ë¡œ ê²°ì •í•©ì‹œë‹¤",
                "ì´ë²ˆ ì£¼ë§ì—” ì½”ë“œ í”„ë¦¬ì¦ˆ ë“¤ì–´ê°‘ë‹ˆë‹¤",
                "í•µì‹¬ KPIëŠ” ë‹¤ìŒ ìœ„í´ë¦¬ ë•Œ ê³µìœ ",
            ],
            10: ['í•˜ì´í¼ë°”ì´ì €ì—ì„œ ë¦¬ì‹œë¸ŒíŒ¨í‚· ì—ëŸ¬ê°€ ë°œìƒí•˜ê³  ìˆìŠµë‹ˆë‹¤', 
                 'êµ¬ ë²„ì „ì˜ í´ë¼ì´ì–¸íŠ¸ë¥¼ ê°€ì§„ ìœ ì €ëŠ” diff ë°œìƒ ë¶„ ë¶€í„° ë°›ê²Œ ë©ë‹ˆë‹¤', 
                 'ê°„í—ì ìœ¼ë¡œ 504 ê²Œì´íŠ¸ì›¨ì´ íƒ€ì„ì•„ì›ƒ ë©”ì‹œì§€ê°€ í™•ì¸ë˜ê³  ìˆìŠµë‹ˆë‹¤', 
                 'ê¸ˆì¼ AWS DX êµ¬ê°„ì˜ ë„¤íŠ¸ì›Œí¬ ìˆœë‹¨ì´ ë°œìƒí•˜ì˜€ìŠµë‹ˆë‹¤',
                 "ì¼ë¶€ ë…¸ë“œì—ì„œ ë””ìŠ¤í¬ I/O ì§€ì—° í˜„ìƒì´ ê´€ì°°ë˜ê³  ìˆìŠµë‹ˆë‹¤",
                 "DB ì»¤ë„¥ì…˜ í’€ ê³ ê°ˆë¡œ ì¸í•´ ê°„í—ì  ìš”ì²­ ì‹¤íŒ¨ê°€ ë°œìƒí•˜ê³  ìˆìŠµë‹ˆë‹¤",
                 "íŠ¹ì • ë¦¬ì „ì˜ ìºì‹œ ì„œë²„ ì‘ë‹µ ì†ë„ê°€ í‰ì†Œ ëŒ€ë¹„ ì €í•˜ë˜ê³  ìˆìŠµë‹ˆë‹¤",
                 "ì›¹ì†Œì¼“ ì—°ê²°ì´ ë¶ˆì•ˆì •í•˜ê²Œ ëŠê¸°ëŠ” í˜„ìƒì´ ë³´ê³ ë˜ê³  ìˆìŠµë‹ˆë‹¤",
                 "ì„œë¹„ìŠ¤ ë‚´ë¶€ API í˜¸ì¶œ ì‹œ íƒ€ì„ì•„ì›ƒ ë¹ˆë„ê°€ ì¦ê°€í•˜ê³  ìˆìŠµë‹ˆë‹¤",
                 "ì¼ë¶€ ì‚¬ìš©ìì˜ ë¡œê·¸ì¸ ìš”ì²­ì—ì„œ ì¸ì¦ ì§€ì—°ì´ í™•ì¸ë˜ê³  ìˆìŠµë‹ˆë‹¤",
                 "ë°°ì¹˜ ì‘ì—… ì‹¤í–‰ ì¤‘ ì˜ˆì™¸ ë°œìƒìœ¼ë¡œ ì²˜ë¦¬ ì§€ì—°ì´ ë°œìƒí•˜ì˜€ìŠµë‹ˆë‹¤",
                 "íŠ¸ë˜í”½ ê¸‰ì¦ìœ¼ë¡œ ì¸í•´ ë¡œë“œë°¸ëŸ°ì„œ ë ˆì´í„´ì‹œê°€ ìƒìŠ¹í•˜ê³  ìˆìŠµë‹ˆë‹¤",
                 "ë©”ì‹œì§€ í ì ì²´ë¡œ ì¸í•œ ì´ë²¤íŠ¸ ì²˜ë¦¬ ì§€ì—°ì´ í™•ì¸ë˜ê³  ìˆìŠµë‹ˆë‹¤",
                 "íŒŒì¼ ì—…ë¡œë“œ ì‹œì ì— ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ë¡œ ì „ì†¡ ì‹¤íŒ¨ ì¦ê°€"
                ]
        };

        let gameState = {
            score: 0,
            lives: 3,
            level: 1,
            drops: [],
            isGameOver: false,
            isPlaying: false,
            lastDropTime: 0,
            dropInterval: 2000,
            baseSpeed: 0.5,
            levelSpeed: [ 0, 1, 2, 3, 4, 5, 6, 6, 0.5, 0.5, 0.5 ],
            levelInterval: [ 0, 2000, 2000, 1900, 1900, 1800, 1800, 1700, 1700, 4000, 4000, 4000]
        };

        const colors = [
            'rgba(0, 255, 255, 0.8)',      // ì‹œì•ˆ ë„¤ì˜¨
            'rgba(255, 0, 255, 0.8)',      // ë§ˆì  íƒ€ ë„¤ì˜¨
            'rgba(0, 255, 127, 0.8)',      // ìŠ¤í”„ë§ ê·¸ë¦°
            'rgba(255, 20, 147, 0.8)',     // í•« í•‘í¬
            'rgba(57, 255, 20, 0.8)',      // ë¼ì„ ê·¸ë¦°
            'rgba(255, 165, 0, 0.8)',      // ì˜¤ë Œì§€ ë„¤ì˜¨
            'rgba(138, 43, 226, 0.8)',     // ë¸”ë£¨ ë°”ì´ì˜¬ë ›
            'rgba(255, 255, 0, 0.8)',      // ì˜ë¡œìš° ë„¤ì˜¨
            'rgba(0, 191, 255, 0.8)',      // ë”¥ ìŠ¤ì¹´ì´ ë¸”ë£¨
            'rgba(255, 105, 180, 0.8)'     // í•« í•‘í¬
        ]

        class Drop {
            constructor(level) {
                const words = WORDS_BY_LEVEL[level] || WORDS_BY_LEVEL[10];
                this.char = words[Math.floor(Math.random() * words.length)];
                this.fontSize = this.char.length > 8 ? 18 : (this.char.length > 4 ? 24 : 36);
                this.x = Math.random() * (canvas.width - (this.char.length * this.fontSize));
                this.y = -30;
                this.speed = gameState.baseSpeed + gameState.levelSpeed[gameState.level] * 0.5;
                this.color = colors[Math.floor(Math.random() * colors.length)]
                console.log(this.speed)
            }

            update() {
                this.y += this.speed;
            }

            draw() {
                ctx.save();
                ctx.fillStyle = this.color;
                ctx.font = `bold ${this.fontSize}px Malgun Gothic`;
                ctx.textAlign = 'left';
                ctx.textBaseline = 'middle';
                ctx.fillText(this.char, this.x, this.y);
                ctx.restore();
            }

            isOnGround() {
                return this.y >= canvas.height - 30;
            }
        }

        function init() {
            gameState = {
                score: 0,
                lives: 3,
                level: 1,
                drops: [],
                isGameOver: false,
                isPlaying: false,
                lastDropTime: 0,
                dropInterval: 2000,
                baseSpeed: 0.5,
                levelSpeed: [ 0, 1, 2, 3, 4, 5, 5, 5, 0.5, 0.5, 0.5 ],
                levelInterval: [ 0, 2000, 2000, 1900, 1900, 1800, 1800, 1700, 1700, 4000, 4000, 4000]
            };
            input.value = '';
            input.disabled = true;
            gameOverDiv.style.display = 'none';
        }

        function startGame() {
            startScreen.style.display = 'none';
            gameState.isPlaying = true;
            input.disabled = false;
            input.focus();
            requestAnimationFrame(gameLoop);
        }

        function updateLevel() {
            const newLevel = Math.min(10, Math.floor(gameState.score / 10) + 1);
            if (newLevel !== gameState.level) {
                gameState.level = newLevel;
                gameState.dropInterval = gameState.levelInterval[gameState.level];
            }
        }

        function getLevel(score) {
            if (score < 9) return 1
            else if (score >= 9 && score < 21) return 2
            else if (score >= 21 && score < 33) return 3
            else if (score >= 33 && score < 45) return 4
            else if (score >= 45 && score < 57) return 5
            else if (score >= 57 && score < 69) return 6
            else if (score >= 69 && score < 81) return 7
            else if (score >= 81 && score < 105) return 8
            else if (score >= 105 && score < 129) return 9
            else if (score >= 129) return 10
        }


        function addDrop(currentTime) {
            if (currentTime - gameState.lastDropTime > gameState.dropInterval) {
                gameState.drops.push(new Drop(gameState.level));
                gameState.lastDropTime = currentTime;
            }
        }

        function updateDrops() {
            for (let i = gameState.drops.length - 1; i >= 0; i--) {
                gameState.drops[i].update();
                
                if (gameState.drops[i].isOnGround()) {
                    gameState.drops.splice(i, 1);
                    gameState.lives--;
                    
                    if (gameState.lives <= 0) {
                        endGame();
                    }
                }
            }
        }

        const backgroundImage = new Image();
        backgroundImage.src = './assets/pangyo.png';

        function drawBackground() {
            // ì´ë¯¸ì§€ë¥¼ ìº”ë²„ìŠ¤ í¬ê¸°ì— ë§ê²Œ ê·¸ë¦¬ê¸°
            ctx.drawImage(backgroundImage, 0, 0, canvas.width, canvas.height);
            
            // ë°˜íˆ¬ëª… ì˜¤ë²„ë ˆì´ (ì„ íƒì‚¬í•­ - ê¸€ì ê°€ë…ì„± í–¥ìƒ)
            ctx.fillStyle = 'rgba(10, 17, 40, 0.3)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
        }

        function drawDrops() {
            gameState.drops.forEach(drop => drop.draw())
        }

        function checkInput() {
            const userInput = input.value.trim();
            if (userInput === '') return;

            for (let i = 0; i < gameState.drops.length; i++) {
                if (gameState.drops[i].char === userInput) {
                    gameState.drops.splice(i, 1);
                    gameState.score += Math.min(6, userInput.length);
                    input.value = '';
                    updateLevel();
                    break;
                }
            }

            input.value = '';
        }

        function updateInfo() {
            const hearts = 'â¤ï¸'.repeat(gameState.lives);
            infoDiv.textContent = `ì ìˆ˜: ${gameState.score} | ëª©ìˆ¨: ${hearts} | ë ˆë²¨: ${gameState.level}`;
        }

        function endGame() {
            gameState.isGameOver = true;
            input.disabled = true;
            gameOverDiv.style.display = 'block';
            document.getElementById('finalScore').textContent = `ìµœì¢… ì ìˆ˜: ${gameState.score}`;
            document.getElementById('finalLevel').textContent = `ìµœì¢… ë ˆë²¨: ${gameState.level}`;
            try {
                GRGScore.onGameEnd(gameState.score);
            } catch {
                //pass
            }            
        }

        function gameLoop(currentTime) {
            if (gameState.isGameOver || !gameState.isPlaying) return;

            drawBackground();
            addDrop(currentTime);
            updateDrops();
            drawDrops();
            updateInfo();

            requestAnimationFrame(gameLoop);
        }

        input.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                checkInput();
            }
        });

        startBtn.addEventListener('click', startGame);
        
        restartBtn.addEventListener('click', () => {
            init();
            startGame();
        });

        init();
        drawBackground();
    </script>
</body>
</html>