<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>íŒêµë¹„ íƒ€ì ê²Œì„</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(to bottom, #1a1a2e 0%, #16213e 100%);
            font-family: 'Malgun Gothic', sans-serif;
        }
        #gameContainer {
            text-align: center;
        }
        canvas {
            border: 3px solid #0f3460;
            background: linear-gradient(to bottom, #0a1128 0%, #1a1a2e 100%);
            box-shadow: 0 0 30px rgba(0, 150, 255, 0.3);
        }
        #info {
            margin-top: 20px;
            color: #e94560;
            font-size: 24px;
            font-weight: bold;
            text-shadow: 0 0 10px rgba(233, 69, 96, 0.5);
        }
        #input {
            margin-top: 15px;
            padding: 12px 20px;
            font-size: 20px;
            width: 300px;
            border: 2px solid #0f3460;
            border-radius: 8px;
            background: #16213e;
            color: #fff;
            text-align: center;
            outline: none;
        }
        #input:focus {
            border-color: #e94560;
            box-shadow: 0 0 15px rgba(233, 69, 96, 0.5);
        }
        .overlay {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(26, 26, 46, 0.95);
            padding: 50px;
            border-radius: 15px;
            border: 3px solid #e94560;
            box-shadow: 0 0 30px rgba(233, 69, 96, 0.5);
            text-align: center;
            z-index: 100;
        }
        .overlay h2 {
            color: #e94560;
            font-size: 48px;
            margin-bottom: 20px;
            text-shadow: 0 0 20px rgba(233, 69, 96, 0.8);
        }
        .overlay h3 {
            color: #fff;
            font-size: 28px;
            margin-bottom: 30px;
        }
        .overlay p {
            color: #bbb;
            font-size: 18px;
            margin: 10px 0;
            line-height: 1.6;
        }
        .overlay ul {
            text-align: left;
            color: #bbb;
            font-size: 18px;
            margin: 20px auto;
            max-width: 400px;
            line-height: 1.8;
        }
        .gameBtn {
            margin-top: 30px;
            padding: 15px 40px;
            font-size: 24px;
            background: #e94560;
            color: #fff;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
        }
        .gameBtn:hover {
            background: #ff6b6b;
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(233, 69, 96, 0.6);
        }
        #finalScore, #finalLevel {
            color: #fff;
            font-size: 24px;
            margin: 15px 0;
        }
    </style>
</head>
<body>
    <div id="gameContainer">
        <canvas id="gameCanvas" width="800" height="600"></canvas>
        <div id="info">ì ìˆ˜: 0 | ëª©ìˆ¨: â¤ï¸â¤ï¸â¤ï¸ | ë ˆë²¨: 1</div>
        <input type="text" id="input" placeholder="ì—¬ê¸°ì— ì…ë ¥í•˜ì„¸ìš”" autocomplete="off">
    </div>
    
    <div id="startScreen" class="overlay" style="display: block;">
        <h2>ğŸŒ§ï¸ íŒêµë¹„ íƒ€ì ê²Œì„ ğŸŒ§ï¸</h2>
        <ul>
            <li>ğŸ’§ í•˜ëŠ˜ì—ì„œ ë–¨ì–´ì§€ëŠ” ë‹¨ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”</li>
            <li>âŒ¨ï¸ ì…ë ¥ í›„ <strong>ì—”í„°</strong>ë¥¼ ëˆŒëŸ¬ ì œì¶œ!</li>
            <li>â¤ï¸ ëª©ìˆ¨ì€ 3ê°œ, ë‹¨ì–´ê°€ ë•…ì— ë‹¿ìœ¼ë©´ -1</li>
            <li>ğŸ“ˆ ìµœëŒ€ 10ë‹¨ê³„ ë ˆë²¨ ì—…!</li>
            <li>âš¡ ë ˆë²¨ì´ ì˜¤ë¥¼ìˆ˜ë¡ ì–´ë ¤ì›Œì ¸ìš”~</li>
        </ul>
        <button class="gameBtn" id="startBtn">ê²Œì„ ì‹œì‘</button>
    </div>
    
    <div id="gameOver" class="overlay">
        <h2>ê²Œì„ ì˜¤ë²„!</h2>
        <p id="finalScore">ìµœì¢… ì ìˆ˜: 0</p>
        <p id="finalLevel">ìµœì¢… ë ˆë²¨: 1</p>
        <button class="gameBtn" id="restartBtn">ë‹¤ì‹œ í•˜ê¸°</button>
    </div>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const input = document.getElementById('input');
        const infoDiv = document.getElementById('info');
        const startScreen = document.getElementById('startScreen');
        const gameOverDiv = document.getElementById('gameOver');
        const startBtn = document.getElementById('startBtn');
        const restartBtn = document.getElementById('restartBtn');

        const WORDS_BY_LEVEL = {
            1: ['ì´ìŠˆ', 'ì½œë°±', 'ì†Œì¼“', 'ë‹ˆì¦ˆ', 'ìŠ¬ë™', 'ë””ì½”', 'ë©˜ì…˜', 'ë¡¤ë°±', 'ì¥ì• '],
            2: ['í‚¥ì˜¤í”„', 'ë””í´íŠ¸', 'ì–¼ë¼ì¸', 'ì›Œí‚¹ë°ì´', 'íŠ¸ë˜í‚¹', 'í”¼ë“œë°±', 'íŒ”ë¡œì—…'],
            3: ['ë¦¬ì†ŒìŠ¤', 'ë§ˆì¼ìŠ¤í†¤', 'ë°°í¬', 'ê¹ƒí—™', 'ì»¤ë°‹', 'ì»´', 'ë””ë²¨ë¡­', 'ì™€ìš°íŒ©í„°'],
            4: ['ëª¨ë‹ˆí„°ë§', 'ë¹Œë“œ', 'ë¡œë“œë§µ', 'í’€ìŠ¤íƒ', 'ì§€ë¼', 'ì–´ì‚¬ì¸', 'API'],
            5: ['í”„ë¡ íŠ¸', 'ë°±ì—”ë“œ', 'SDK', 'ISMS', 'ë§ˆí¬ì—…', 'ESG'],
            6: ['ITGC', 'ë¦¬ë¶“', 'ë¦¬ì „', 'AWS', 'IDC', 'íƒ€ì„ì•„ì›ƒ', 'ì´ì§ì˜ë‹¤ë¦¬'],
            7: ['ìŠ¤í¬ëŸ¼', 'ì—ìì¼', 'LTS', 'ì»¤í”¼ì±—', 'ìŠ¤í™ì•„ì›ƒ'],
            8: ['ëŸ¬í”„í•˜ê²Œ ì¼ì • ì£¼ì„¸ìš”.', 'ë©˜ì…˜ ì¶”ê°€í•´ ì£¼ì„¸ìš”.', 'ì´ìŠˆì—… ë¶€íƒë“œë¦½ë‹ˆë‹¤.', 'ì¸ì¦ì„œ ì‹±ê¸€ë¡œ ë°œê¸‰í•´ë„ ë ê¹Œìš”?', 'í˜¸ìŠ¤íŠ¸ ë„£ìœ¼ì…¨ì–´ìš”?'],
            9: ['ìºì‹œ ë‚ ë¦¬ê³  í™•ì¸ ë¶€íƒë“œë ¤ìš”.', 'ì´ìŠˆê°€ ìˆì–´ ë¡¤ë°± í•˜ê² ìŠµë‹ˆë‹¤.', 'QA ì‚¬ì¸ì˜¤í”„ ë˜ì—ˆìŠµë‹ˆë‹¤.', 'í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸ ì ìš© í•˜ì˜€ìŠµë‹ˆë‹¤.', 'ê·¸ë¼íŒŒë‚˜ ëŒ€ì‹œë³´ë“œ ì¶”ê°€ í•˜ì˜€ìŠµë‹ˆë‹¤.'],
            10: ['í•˜ì´í¼ë°”ì´ì €ì—ì„œ ë¦¬ì‹œë¸ŒíŒ¨í‚· ì—ëŸ¬ê°€ ë°œìƒí•˜ê³  ìˆìŠµë‹ˆë‹¤.', 
            'êµ¬ ë²„ì „ì˜ í´ë¼ì´ì–¸íŠ¸ë¥¼ ê°€ì§„ ìœ ì €ëŠ” DLCë¥¼ diff ë°œìƒ ë¶„ ë¶€í„° ë‹¤ì‹œ ë°›ê²Œ ë©ë‹ˆë‹¤.', 
            'ë‚´ì™¸ë¶€ë§ì—ì„œ ê°„í—ì ìœ¼ë¡œ 504 ê²Œì´íŠ¸ì›¨ì´ íƒ€ì„ì•„ì›ƒ ë©”ì‹œì§€ê°€ í™•ì¸ë˜ê³  ìˆìŠµë‹ˆë‹¤.', 
            'ê¸ˆì¼ AWS DX êµ¬ê°„ì˜ ë„¤íŠ¸ì›Œí¬ ìˆœë‹¨ì´ ë°œìƒí•˜ì˜€ìŠµë‹ˆë‹¤.']
        };

        let gameState = {
            score: 0,
            lives: 3,
            level: 1,
            drops: [],
            isGameOver: false,
            isPlaying: false,
            lastDropTime: 0,
            dropInterval: 2000,
            baseSpeed: 0.5,
            levelSpeed: [ 0, 1, 2, 3, 4, 5, 5, 5, 0.3, 0.3, 0.3 ],
            levelInterval: [ 0, 2000, 2000, 1900, 1900, 1800, 1800, 1700, 1700, 4000, 4000, 4000]
        };

        const colors = [
            'rgba(233, 69, 96, 0.8)',
            'rgba(69, 194, 233, 0.8)',
            'rgba(233, 69, 212, 0.8)',
            'rgba(233, 210, 69, 0.8)'
        ]

        class Drop {
            constructor(level) {
                const words = WORDS_BY_LEVEL[level] || WORDS_BY_LEVEL[10];
                this.char = words[Math.floor(Math.random() * words.length)];
                this.fontSize = this.char.length > 8 ? 18 : (this.char.length > 4 ? 24 : 36);
                this.x = Math.random() * (canvas.width - (this.char.length * this.fontSize));
                this.y = -30;
                this.speed = gameState.baseSpeed + gameState.levelSpeed[gameState.level] * 0.5;
                this.color = colors[Math.floor(Math.random() * colors.length)]
            }

            update() {
                this.y += this.speed;
            }

            draw() {
                ctx.save();
                ctx.fillStyle = this.color;
                ctx.font = `bold ${this.fontSize}px Malgun Gothic`;
                ctx.textAlign = 'left';
                ctx.textBaseline = 'middle';
                ctx.fillText(this.char, this.x, this.y);
                ctx.restore();
            }

            isOnGround() {
                return this.y >= canvas.height - 30;
            }
        }

        function init() {
            gameState = {
                score: 0,
                lives: 3,
                level: 1,
                drops: [],
                isGameOver: false,
                isPlaying: false,
                lastDropTime: 0,
                dropInterval: 2000,
                baseSpeed: 0.5,
                levelSpeed: [ 0, 1, 2, 3, 4, 5, 5, 5, 0.5, 0.5, 0.5 ],
                levelInterval: [ 0, 2000, 2000, 1900, 1900, 1800, 1800, 1700, 1700, 4000, 4000, 4000]
            };
            input.value = '';
            input.disabled = true;
            gameOverDiv.style.display = 'none';
        }

        function startGame() {
            startScreen.style.display = 'none';
            gameState.isPlaying = true;
            input.disabled = false;
            input.focus();
            requestAnimationFrame(gameLoop);
        }

        function updateLevel() {
            const newLevel = Math.min(10, Math.floor(gameState.score / 10) + 1);
            if (newLevel !== gameState.level) {
                gameState.level = newLevel;
                gameState.dropInterval = gameState.levelInterval[gameState.level];
            }
        }

        function addDrop(currentTime) {
            if (currentTime - gameState.lastDropTime > gameState.dropInterval) {
                gameState.drops.push(new Drop(gameState.level));
                gameState.lastDropTime = currentTime;
            }
        }

        function updateDrops() {
            for (let i = gameState.drops.length - 1; i >= 0; i--) {
                gameState.drops[i].update();
                
                if (gameState.drops[i].isOnGround()) {
                    gameState.drops.splice(i, 1);
                    gameState.lives--;
                    
                    if (gameState.lives <= 0) {
                        endGame();
                    }
                }
            }
        }

        const backgroundImage = new Image();
        backgroundImage.src = './assets/pangyo.png';

        function drawBackground() {
            // ì´ë¯¸ì§€ë¥¼ ìº”ë²„ìŠ¤ í¬ê¸°ì— ë§ê²Œ ê·¸ë¦¬ê¸°
            ctx.drawImage(backgroundImage, 0, 0, canvas.width, canvas.height);
            
            // ë°˜íˆ¬ëª… ì˜¤ë²„ë ˆì´ (ì„ íƒì‚¬í•­ - ê¸€ì ê°€ë…ì„± í–¥ìƒ)
            ctx.fillStyle = 'rgba(10, 17, 40, 0.3)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            ctx.fillStyle = '#0f3460';
            ctx.fillRect(0, canvas.height - 20, canvas.width, 20);
        }

        function drawDrops() {
            gameState.drops.forEach(drop => drop.draw())
        }

        function checkInput() {
            const userInput = input.value.trim();
            if (userInput === '') return;

            for (let i = 0; i < gameState.drops.length; i++) {
                if (gameState.drops[i].char === userInput) {
                    gameState.drops.splice(i, 1);
                    gameState.score += Math.min(3, userInput.length);
                    input.value = '';
                    updateLevel();
                    break;
                }
            }

            input.value = '';
        }

        function updateInfo() {
            const hearts = 'â¤ï¸'.repeat(gameState.lives);
            infoDiv.textContent = `ì ìˆ˜: ${gameState.score} | ëª©ìˆ¨: ${hearts} | ë ˆë²¨: ${gameState.level}`;
        }

        function endGame() {
            gameState.isGameOver = true;
            input.disabled = true;
            gameOverDiv.style.display = 'block';
            document.getElementById('finalScore').textContent = `ìµœì¢… ì ìˆ˜: ${gameState.score}`;
            document.getElementById('finalLevel').textContent = `ìµœì¢… ë ˆë²¨: ${gameState.level}`;
            try {
                GRGScore.onGameEnd(gameState.score);
            } catch {
                //pass
            }            
        }

        function gameLoop(currentTime) {
            if (gameState.isGameOver || !gameState.isPlaying) return;

            drawBackground();
            addDrop(currentTime);
            updateDrops();
            drawDrops();
            updateInfo();

            requestAnimationFrame(gameLoop);
        }

        input.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                checkInput();
            }
        });
        restartBtn.addEventListener('click', () => {
            init();
            requestAnimationFrame(gameLoop);
        });

        startBtn.addEventListener('click', startGame);
        
        restartBtn.addEventListener('click', () => {
            init();
            startGame();
        });

        input.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                checkInput();
            }
        });

        init();
        drawBackground();
    </script>
</body>
</html>